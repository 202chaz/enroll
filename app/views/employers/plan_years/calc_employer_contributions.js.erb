
$('#<%= @location_id %> <%= @coverage_type %>.selected-plan').html("<%= escape_javascript(render(partial: "employers/plan_years/plan_selection/plan_details")).html_safe %>")
$("#<%= @location_id %> <%= @coverage_type %>.selected-plan h2.employer-monthly-cost").html("<%= number_to_currency(@employer_contribution_amount.to_f) %>");
$("#<%= @location_id %> <%= @coverage_type %>.selected-plan .employee-monthly-cost-min").html("<%= number_to_currency(@min_employee_cost.to_f) %>");
$("#<%= @location_id %> <%= @coverage_type %>.selected-plan .employee-monthly-cost-max").html("<%= number_to_currency(@max_employee_cost.to_f) %>");
$("#<%= @location_id %> .select-dental-plan").show();
$('#<%= @location_id %> .dental-benefits-fields .col-xs-6.form-group.form-group-lg label > input').attr('disabled', 'disabled');
$("#<%= @location_id %> .dental-reference-plans, #<%= @location_id %> .dental.selected-plan > .row:first").hide();
$("#<%= @location_id %> .dental .dental-config-links, #<%= @location_id %> <%= @coverage_type %> .change-dental-reference-plan").show();

if ( '<%= @coverage_type %>' == '.dental' ) {
   $('#<%= @location_id %> .select-dental-plan h4 .starter:first + span').show();
   if (window.location.href.indexOf("edit") > -1 && window.location.href.indexOf("plan_years") > -1) {
    $('#<%= @location_id %> <%= @coverage_type %> .reference-steps > div:first').hide();
    $('#<%= @location_id %> <%= @coverage_type %>.selected-plan').show();
   }
} else {
  if (window.location.href.indexOf("edit") > -1 && window.location.href.indexOf("plan_years") > -1) {
    $("#<%= @location_id %> .health.selected-plan .row:first").hide();
  } else {

  }
}

$('#<%= @location_id %> <%= @coverage_type %> .dental-config-reference-selection').on('click', function() {
  $('#<%= @location_id %> <%= @coverage_type %> .reference-steps > div:first').show();
  $('#<%= @location_id %>  <%= @coverage_type %> .selected-plan').hide();
  $('#<%= @location_id %> .dental .nav-tabs, .dental .plan-options, .dental .dental-plan-offering').show();
  $("#<%= @location_id %> .dental-ref-plan").val("","");

  $("#<%= @location_id %> .dental .nav-tabs input[type=radio], #<%= @location_id %> .dental .plan-options input[type=radio]").removeAttr('checked');
  if ( $("#<%= @location_id %> .dental .nav-tabs label:first").closest('.li').hasClass('active') == true ) {
  } else {
    $("#<%= @location_id %> .dental .nav-tabs label:first").trigger('click');
  }
});
$('#<%= @location_id %> .change-dental-reference-plan').on('click', function() {
  $('#<%= @location_id %> .dental-reference-plans').show();
  $('#<%= @location_id %> .dental.selected-plan').hide();
});




  $(function() {
     $("#<%= @location_id %> <%= @coverage_type %> #employer_cost_info_btn .btn").click(function(){
      var location_id = $(this).parents('.benefit-group-fields').attr('id');
      var reference_plan_id = $("#<%= @location_id %> <%= @coverage_type %> #plan_year_benefit_groups_attributes_0_reference_plan_id").val();

      if ( $(this).closest('.health').length > 0 ) {
        var coverage_type = '.health';
      } else {
        var coverage_type = '.dental';
      }

      if (reference_plan_id == "" || reference_plan_id == undefined) {
        return
      }
      console.log(location_id+", "+reference_plan_id);
      calcEmployerContributions($('a#employee_costs_link').attr('href'), location_id, coverage_type);
    })

  })

})
