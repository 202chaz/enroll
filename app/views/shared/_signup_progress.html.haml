- step = (defined? step) ? step.to_i : 1

- percent_complete = 0
- percent_complete = (step == 2) ? 15 : ((step == 3) ? 30 : ((step == 4) ? 45 : ((step == 5) ? 60 : ((step == 6) ? 75 : ((step == 7) ? 100 : 0)))))

%h3= "#{percent_complete}% Complete"
%ul.list-unstyled.progress-wrapper.hidden-xs
  %li{class: add_progress_class(1, step)}
    %span.circle-progress
    .vertical-line-progress
    Personal Info
  %li{class: add_progress_class(2, step)}
    %span.circle-progress
    .vertical-line-progress
    Employer
  %li{class: add_progress_class(3, step)}
    %span.circle-progress
    .vertical-line-progress
    Contact Info
  %li{class: add_progress_class(4, step)}
    %span.circle-progress
    .vertical-line-progress
    Household
  %li{class: add_progress_class(5, step)}
    %span.circle-progress
    .vertical-line-progress
    Plan Selection
  %li{class: add_progress_class(6, step)}
    %span.circle-progress
    .vertical-line-progress
    Review
  %li{class: add_progress_class(7, step)}
    %span.circle-progress
    .vertical-line-progress
    Complete

- if step == 4 && defined? url
  = link_to 'Continue', url, class: 'btn btn-lg btn-primary btn-br btn-block', id: 'btn-continue'
- elsif step == 2
  - @employment_relationships.each do |emp_relationship|
    = form_for(emp_relationship, :url => insured_employee_index_path, :as => :employment_relationship, :method => :post) do |f|
      = f.submit "continue", :class => "btn btn-primary btn-br full-width"
      = f.hidden_field :first_name
      = f.hidden_field :last_name
      = f.hidden_field :middle_name
      = f.hidden_field :name_pfx
      = f.hidden_field :name_sfx
      = f.hidden_field :gender
      = f.hidden_field :hired_on
      = f.hidden_field :eligible_for_coverage_on
      = f.hidden_field :census_employee_id
    = form_for @person, { :as => :person, :url => match_insured_consumer_role_index_path, :method => :post } do |f|
      = f.hidden_field :first_name, value: @person_params[:first_name]
      = f.hidden_field :middle_name, value: @person_params[:middle_name]
      = f.hidden_field :last_name, value: @person_params[:last_name]
      = f.hidden_field :name_sfx, value: @person_params[:name_sfx]
      = f.hidden_field :dob, value: @person_params[:dob]
      = f.hidden_field :ssn, value: @person_params[:ssn]
      = f.hidden_field :no_ssn, value: @person_params[:no_ssn]
      = f.hidden_field :gender, value: @person_params[:gender]
      = hidden_field_tag :persisted, true
      = f.submit "continue", :class => "btn btn-primary btn-br full-width"
- elsif step == 5 || step == 2
  %button.btn.btn-lg.btn-primary.btn-br.btn-block#btn-continue{disabled: true}
    CONTINUE
  - if step ==5

    = link_to 'Waive Coverage', '#', data: {toggle: "modal", target: "#waive_confirm"}, class: 'btn btn-waive btn-trans' if @hbx_enrollment and @hbx_enrollment.employee_role.present?
- elsif step == 6
  = link_to purchase_or_confirm, checkout_insured_plan_shopping_path(@enrollment.id, :plan_id => @plan.id, market_kind: @market_kind, coverage_kind: @coverage_kind), :class => 'btn btn-lg btn-primary btn-br btn-block', id: 'btn-continue', :method => :post, :disabled => !@enrollable
  = link_to 'Waive Coverage', '#', data: {toggle: "modal", target: "#waive_confirm"}, class: 'btn-waive btn btn-round btn-trans' if @enrollment and @enrollment.employee_role.present?
- elsif step == 7
  = link_to 'Continue', family_account_path, class: 'btn btn-lg btn-primary btn-br btn-block', id: 'btn-continue'
- else
  %button.btn.btn-lg.btn-primary.btn-br.btn-block#btn-continue{type: 'submit'}
    CONTINUE

-if step != 7
  %ul.list-unstyled.list-right-section
    - unless @no_previous_button
      %li
        %a.back{href: '#'}
          = image_tag 'icons/list.png'
          PREVIOUS
    - unless @no_save_button
      %li
        %a{href: '#'}
          = image_tag 'icons/list.png'
          SAVE &amp; EXIT
        %br
        %br
