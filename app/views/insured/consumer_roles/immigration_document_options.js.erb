<% case @vlp_doc_target %>
<% when "immigration_naturalization_cert_container" %>
  <% partial_target = "shared/naturalization_cert_fields" %>
<% when "immigration_citizenship_cert_container" %>
  <% partial_target = "shared/citizenship_cert_fields" %>
<% when "immigration_i_327_fields_container" %>
  <% partial_target = "insured/consumer_roles/i_327_fields" %>
<% when "immigration_i_766_fields_container" %>
  <% partial_target = "insured/consumer_roles/i_766_fields" %>
<% when "immigration_i_571_fields_container" %>
  <% partial_target = "insured/consumer_roles/i_571_fields" %>
<% when "immigration_i_94_fields_container" %>
  <% partial_target = "insured/consumer_roles/i_94_fields" %>
<% when "immigration_i_94_2_fields_container" %>
  <% partial_target = "insured/consumer_roles/i_94_2_fields" %>
<% when "machine_readable_immigrant_visa_fields_container" %>
  <% partial_target = "insured/consumer_roles/machine_readable_immigrant_visa_fields" %>
<% when "immigration_i_551_fields_container" %>
  <% partial_target = "insured/consumer_roles/i_551_fields" %>
<% when "immigration_temporary_i_551_stamp_fields_container" %>
  <% partial_target = "insured/consumer_roles/temporary_i_551_stamp_fields" %>
<% when "immigration_temporary_i_20_stamp_fields_container" %>
  <% partial_target = "insured/consumer_roles/i_20_fields" %>
<% when "immigration_other_with_alien_number_fields_container" %>
  <% partial_target = "insured/consumer_roles/other_with_alien_number_fields" %>
<% when "immigration_other_with_i94_fields_container" %>
  <% partial_target = "insured/consumer_roles/other_with_i94_fields" %>
<% when "immigration_unexpired_foreign_passport_fields_container" %>
  <% partial_target = "insured/consumer_roles/unexpired_foreign_passport_fields" %>
<% when "immigration_DS_2019_fields_container" %>
  <% partial_target = "insured/consumer_roles/ds_2019_fields" %>
<% end %>

<% url = @target.is_a?(Person) ? {} : employee_dependent_submission_options_for(@target) %>

'<%= form_for @target, url do |f| %>'
  '<% if f.object.is_a? Person %>'
    '<%= f.fields_for :consumer_role do |c| %>'
      $(".immigration_document_area").html("<%= escape_javascript(render partial: partial_target, locals: {c: c}) %>")
    '<% end %>'
  '<% else %>'
    '<% if f.object.persisted? %>'
      '<% dependent_consumer_role = f.object.family_member.person.consumer_role %>'
    '<% else %>'
      '<% dependent_consumer_role = ConsumerRole.new %>'
    '<% end %>'
    '<%= f.fields_for dependent_consumer_role do |c| %>'
      $(".immigration_document_area").html("<%= escape_javascript(render partial: partial_target, locals: {c: c}) %>")
    '<% end %>'
  '<% end %>'
'<% end %>'
