
feins = ["000000011","000000017","000000023","000000024","000000029","000000031","000000035","000000036","000000037","000000040","000000041","000000042","010760023","010974476","020767157",
  "020769309","020785811","030480309","030491827","030552203","030575412","042552770","042992565","043677636","043779224","050373312","061440662","061616367","061704450",
  "061811886","084462763","112571899","113744658","130615840","131635283","131687573","132581875","132942996","133711840","133914342","134018585","134229575","134249543",
  "135544472","136223604","141887819","161629866","200052307","200118307","200279558","200457331","200482817","200529671","200702606","200763349","200915207","201115618",
  "201163020","201712178","201782838","201799842","201904217","202037984","202130493","202187349","202349392","202458375","202468102","202700607","202926200","202990791",
  "203235972","203380456","203849524","203977558","204042406","204073133","204238188","204332932","204379707","204630877","204690417","204826769","204865805","205036229",
  "205150809","205258714","205717831","205939282","208124078","208146088","208194864","208202272","208388881","208446765","208624702","208802586","223856367","223980819",
  "237000150","237122917","237147887","237185827","237200739","237218916","237238454","237257037","237333380","237347351","237367533","237383218","237447365","260058528",
  "260126537","260204031","260273675","260392676","260767250","260832862","261089584","261126743","261283336","261370751","261392682","261493743","261607955","261715929",
  "261799321","262113110","262190029","262347256","262516387","262595775","262838617","262903088","263155690","263412575","263463204","263518005","263724642","263882525",
  "264032886","264094042","264127579","264179120","264203364","264370653","264435206","264442148","264526799","264553787","264573463","264787596","270416852","270467200",
  "270586980","270601710","270920269","271315669","271541515","271712188","271713532","271969904","271976324","272618506","272787772","272942781","272942864","273049330",
  "273067305","273175119","273208144","273281915","273369694","273443167","273676097","273865361","273980558","274096953","274270911","274415158","274500380","274551672",
  "274568381","274851102","274973403","300044814","300055352","300056088","300168697","300473980","300553138","300630733","311766444","320302414","320397845","320494618",
  "326166948","330798803","331096765","342052507","352464054","352537164","362340300","362481232","363832940","363976313","364476244","364778585","364827426","371576351",
  "371635320","383641604","383801102","383827892","383851491","383895505","396095459","410976048","411398118","411791489","412238287","421693698","421719040","431448690",
  "432017324","432066514","436051526","450476610","450567924","451431314","451653498","451657406","452393822","452398600","452472065","452508213","452649154","452922471",
  "453156794","453170287","453757162","453781606","453783744","453836904","453845245","454005553","454026252","454028722","454495950","454756143","454768994","454868462",
  "454913754","455198466","455373892","455484082","455527711","455616367","460580695","460808848","460850874","460906551","460988928","461143189","461225422","461301428",
  "461368721","461593541","461625412","461794161","462231413","462462990","462488524","462671148","462690344","462882019","462945820","462975017","463043513","463346460",
  "463553978","463662061","463819394","463995547","464160139","464166123","464204124","464290025","464327434","464528344","464530167","464567869","464614572","464721526",
  "464742228","465019387","465096233","465118578","465221122","465441879","470894510","470975519","471031602","471062064","471109600","471118215","471138215","471216605",
  "471221154","471277957","472006575","472033304","472035305","472178688","472366575","472380384","472392145","472448373","472457279","472482633","472574696","472577579",
  "472622751","472675069","472679215","472871408","473089352","473188126","473292237","473351355","473437657","473472155","473510402","473518333","473570222","473679621",
  "473916718","473972994","473974806","474043211","474045086","474089422","474131339","474325410","474595801","474869860","474932033","475031574","475214305","475437882",
  "475636833","475679222","492968205","510516206","510561519","510599180","510629765","520741350","520781390","520807696","520812521","520845718","520847836","520848769",
  "520858001","520886652","520891609","520899578","520909444","520910609","520939363","520941367","520944380","520966285","520967608","520984255","520986261","520986797",
  "521046309","521064126","521069070","521074671","521084655","521088411","521089824","521091718","521103986","521104567","521104809","521108192","521109626","521131199",
  "521136337","521147118","521148917","521156410","521164983","521165147","521167602","521168827","521169002","521173228","521190146","521209825","521213972","521218125",
  "521218686","521218832","521220223","521223977","521224516","521231983","521234205","521244435","521246755","521248559","521249674","521263300","521265163","521268692",
  "521279682","521282069","521282103","521282770","521289734","521294659","521298659","521356444","521380506","521385018","521431622","521432970","521436466","521437006",
  "521447196","521448820","521449994","521465200","521466574","521467119","521471376","521473117","521473769","521474935","521480202","521481003","521492039","521499111",
  "521505364","521517415","521532143","521541060","521547845","521553060","521557819","521565478","521575658","521576808","521583134","521585899","521586114","521588278",
  "521594479","521601976","521606784","521611993","521629385","521633220","521644571","521645512","521660746","521666801","521666904","521673153","521679198","521684389",
  "521687743","521688268","521690303","521694859","521722025","521724929","521724971","521740146","521743817","521746328","521747823","521747924","521757258","521764344",
  "521766832","521768183","521782312","521792575","521793723","521795060","521797757","521801489","521807436","521812095","521812360","521813042","521819508","521821935",
  "521847187","521853388","521854132","521854633","521855944","521867495","521879041","521888617","521891162","521900338","521903073","521903945","521905865","521909847",
  "521925788","521926343","521928321","521929169","521935342","521954273","521956205","521961390","521972275","521973930","521979573","521979618","521983273","521984905",
  "521992124","522000972","522003122","522005999","522007895","522013356","522044316","522059201","522061398","522066409","522071979","522075691","522076082","522077951",
  "522086073","522092229","522097093","522100597","522101783","522125232","522127062","522139122","522139674","522141499","522148028","522165679","522180361","522181533",
  "522202731","522209171","522217020","522228944","522237955","522250839","522257069","522261338","522270569","522271199","522277650","522279789","522289343","522296242",
  "522316513","522332161","522334463","522336694","522344633","522350987","522359517","526053597","526054211","526063003","526065505","530078064","530163480","530182304",
  "530189178","530191635","530196567","530197023","530201496","530204690","530207408","530208180","530210664","530224276","530225257","530226394","530232732","530233594",
  "530234643","530257818","530258392","530259366","530259837","530259978","530261146","540806695","541394025","541416327","541701515","541824478","541833272","541861235",
  "541876636","541922668","541935736","541935838","541961423","541965828","542051425","542073913","562325097","562333590","562523275","562596409","562600396","571177110",
  "571192973","581557556","593287523","611521377","611558833","611577184","611624657","611690874","611765307","621320936","621440640","631044781","640959669","651167245",
  "658624567","711019574","711045354","721268719","743150023","753049930","760830661","800429122","800969989","810651758","810898773","810955935","810971614","810998656",
  "811095280","811160808","811239309","811397590","811787135","812341035","812461975","812593815","812922803","820551838","820582156","830469770","841842237","870745629",
  "870803909","900141890","900436782","900536785","900956030","911568650","931234124","941450490","942716768","943438751","946316767","952376719","953750694","953927141",
  "954163931","980227419","980578398","981083905","999999995"]

feins.each do |fein|
  begin
    org = Organization.where(:fein => fein).first
    if (org.employer_profile.inbox.messages.where(:subject => "Group Renewal Available").first.present? || org.employer_profile.documents.where(:title => "GroupRenewalAvailable").first.present?)
      event = "group_renewal_5"
      event_kind = ApplicationEventKind.where(:event_name => event).first
      notice_trigger = event_kind.notice_triggers.first
      builder = notice_trigger.notice_builder.camelize.constantize.new(org.employer_profile, {
                template: notice_trigger.notice_template,
                subject: event_kind.title,
                key: "corrected",
                mpi_indicator: notice_trigger.mpi_indicator,
                }.merge(notice_trigger.notice_trigger_element_group.notice_peferences)).deliver
      puts "Delivered notice to #{org.legal_name}" unless Rails.env.test?
    else
      puts "No notice present for #{org.legal_name}" unless Rails.env.test?
    end
  rescue Exception => e
    puts "Unable to send group_renewal_5 notice to #{org.legal_name} due to #{e}" unless Rails.env.test?
  end
end
